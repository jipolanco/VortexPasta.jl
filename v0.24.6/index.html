<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>VortexPasta.jl · VortexPasta</title><meta name="title" content="VortexPasta.jl · VortexPasta"/><meta property="og:title" content="VortexPasta.jl · VortexPasta"/><meta property="twitter:title" content="VortexPasta.jl · VortexPasta"/><meta name="description" content="Documentation for VortexPasta."/><meta property="og:description" content="Documentation for VortexPasta."/><meta property="twitter:description" content="Documentation for VortexPasta."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/fonts.css" rel="stylesheet" type="text/css"/><script src="assets/tomate.js"></script><script src="assets/sa.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>VortexPasta</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>VortexPasta.jl</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Running-the-code"><span>Running the code</span></a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/01-vortex_ring/">Vortex ring</a></li><li><a class="tocitem" href="tutorials/02-kelvin_waves/">Kelvin waves</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="methods/VFM/">The vortex filament model</a></li><li><a class="tocitem" href="methods/Ewald/">Ewald summation for Biot–Savart</a></li></ul></li><li><span class="tocitem">Tips and tricks</span><ul><li><a class="tocitem" href="tips/parallelisation/">Parallelisation</a></li></ul></li><li><span class="tocitem">Modules</span><ul><li><a class="tocitem" href="modules/PaddedArrays/">PaddedArrays</a></li><li><a class="tocitem" href="modules/PredefinedCurves/">PredefinedCurves</a></li><li><a class="tocitem" href="modules/CellLists/">CellLists</a></li><li><a class="tocitem" href="modules/BasicTypes/">BasicTypes</a></li><li><a class="tocitem" href="modules/Quadratures/">Quadratures</a></li><li><a class="tocitem" href="modules/Filaments/">Filaments</a></li><li><a class="tocitem" href="modules/FilamentIO/">FilamentIO</a></li><li><a class="tocitem" href="modules/FindNearbySegments/">FindNearbySegments</a></li><li><a class="tocitem" href="modules/BiotSavart/">BiotSavart</a></li><li><a class="tocitem" href="modules/Reconnections/">Reconnections</a></li><li><a class="tocitem" href="modules/Timestepping/">Timestepping</a></li><li><a class="tocitem" href="modules/Diagnostics/">Diagnostics</a></li></ul></li><li><a class="tocitem" href="references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>VortexPasta.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>VortexPasta.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jipolanco/VortexPasta.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jipolanco/VortexPasta.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="VortexPasta.jl"><a class="docs-heading-anchor" href="#VortexPasta.jl">VortexPasta.jl</a><a id="VortexPasta.jl-1"></a><a class="docs-heading-anchor-permalink" href="#VortexPasta.jl" title="Permalink"></a></h1><p>A vortex filament solver for the simulation of quantum vortex flows.</p><p>This solver implements the methods described in <a href="references/#Polanco2024">Polanco (2024)</a> for the fast evaluation of Biot–Savart integrals in periodic domains.</p><ul><li><a href="#Introduction">Introduction</a></li><li class="no-marker"><ul><li><a href="#Physical-context">Physical context</a></li><li><a href="#Numerical-considerations">Numerical considerations</a></li></ul></li><li><a href="#Installation">Installation</a></li><li class="no-marker"><ul><li><a href="#Installing-Julia">Installing Julia</a></li><li><a href="#Local-environments">Local environments</a></li><li><a href="#Installing-VortexPasta.jl">Installing VortexPasta.jl</a></li><li><a href="#Installing-VortexPasta.jl-in-development-mode">Installing VortexPasta.jl in development mode</a></li></ul></li><li><a href="#Running-the-code">Running the code</a></li></ul><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><h3 id="Physical-context"><a class="docs-heading-anchor" href="#Physical-context">Physical context</a><a id="Physical-context-1"></a><a class="docs-heading-anchor-permalink" href="#Physical-context" title="Permalink"></a></h3><p><a href="https://en.wikipedia.org/wiki/Quantum_vortex">Quantum vortices</a> are one of the most important features of superfluids such as low-temperature liquid helium or Bose–Einstein condensates. These are <em>topological defects</em> – which in three dimensions take the form of spatial curves – where the velocity of the superfluid is singular. The main property of quantum vortices is that they have a <em>quantised circulation</em>. That is, they induce a rotating velocity field around them whose intensity is quantised in terms of the quantum of circulation <span>$κ = h/m$</span> where <span>$h$</span> is <a href="https://en.wikipedia.org/wiki/Planck_constant">Planck&#39;s constant</a> and <span>$m$</span> is the mass of one boson (e.g. the mass of a ⁴He atom).</p><p>In the case of helium-4, superfluidity takes place at temperatures below about 2.17 K, and the thickness of quantum vortices is about 1 Å (<span>$10^{-10}$</span> m). Their atomic-scale thickness justifies treating quantum vortices as infinitesimal lines when describing the macroscopic flow induced by them. This is precisely the idea of the <a href="methods/VFM/#methods-VFM">vortex filament model (VFM)</a> which is implemented in this package.</p><h3 id="Numerical-considerations"><a class="docs-heading-anchor" href="#Numerical-considerations">Numerical considerations</a><a id="Numerical-considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Numerical-considerations" title="Permalink"></a></h3><p>From a numerical standpoint, simulating large sets of quantum vortices using the VFM is expensive. Indeed, assuming that vortex lines are discretised by a set of <span>$N$</span> points in space, the VFM requires computing the velocity of each vortex point <span>$\bm{s}_i$</span> (for <span>$i ∈ [1, N]$</span>) induced by the locations of <em>all</em> vortex points. Note that the influence of a vortex on the surrounding space decays relatively slowly with the distance <span>$r$</span> (the induced velocity typically decays as <span>$1/r$</span>), and thus one needs to account for all pair interactions – even over long distances. A naive implementation, where all such pair interactions are computed one by one, leads to a computational complexity of <span>$\mathcal{O}(N^2)$</span>, that is, the computational cost increases quickly with the number of discretisation points (or vortices). For this reason, simulating fully turbulent flows is prohibitively costly with naive methods.</p><p>The VortexPasta.jl solver provides an efficient and accurate implementation of the VFM (<a href="references/#Polanco2024">Polanco, 2024</a>), specifically intended for vortex flows in <strong>periodic domains</strong>. Its efficiency comes from the use of a <a href="methods/Ewald/#methods-Ewald">splitting technique</a> derived from the <a href="https://en.wikipedia.org/wiki/Ewald_summation">Ewald summation</a> method, which splits the Biot–Savart integral into a <em>short-range</em> and a <em>long-range</em> parts. This kind of methods is routinely used in the context of molecular dynamics simulations to compute electrostatic Coulomb interactions between point charges. In the modified short-range integral, pair interactions decay exponentially with <span>$r$</span>, which means that one can effectively ignore interactions beyond some cut-off distance <span>$r_{\text{cut}}$</span>. Meanwhile, the long-range integral is smooth (non-singular) at <span>$r = 0$</span>, and thus can be indirectly computed using fast Fourier transforms (FFTs), leading to a complexity of <span>$\mathcal{O}(N \log N)$</span>. Conveniently, the long-range velocity field is nothing but the velocity induced by a coarse-grained vorticity field, which enables a simple interpretation of the long-range component, as well as the use of tools and quantities commonly used for classical flows (such as energy spectra, …).</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="Installing-Julia"><a class="docs-heading-anchor" href="#Installing-Julia">Installing Julia</a><a id="Installing-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-Julia" title="Permalink"></a></h3><p>The easiest way of installing (and updating) Julia is using the official <a href="https://github.com/JuliaLang/juliaup"><code>juliaup</code></a> installer.</p><p>On Linux and Mac, one can install <code>juliaup</code> by executing in a terminal</p><pre><code class="language-bash hljs">curl -fsSL https://install.julialang.org | sh</code></pre><p>This will automatically install the latest Julia release and make it available from your terminal using the <code>julia</code> command.</p><p>To get started with using Julia, the <a href="https://modernjuliaworkflows.github.io/">Modern Julia Workflows blog</a> is a great source of practical information. See in particular the section on <a href="https://modernjuliaworkflows.github.io/pages/writing/writing/">writing Julia code</a>.</p><p>In particular, it is highly recommended to install the <a href="https://github.com/timholy/Revise.jl/">Revise.jl</a> package in the default environment. This package keeps track of modifications of included code when working from a Julia session, which means that one doesn&#39;t need to re-include a Julia file each time it is modified. To install it, launch Julia in a terminal, enter package mode using <code>]</code>, and then:</p><pre><code class="language-julia-repl hljs">(@v1.10) pkg&gt; add Revise</code></pre><p>Another very widely used package is <a href="https://github.com/KristofferC/OhMyREPL.jl">OhMyREPL.jl</a>, which adds syntax highlighting to the REPL among other nice things. It can be installed in the same way as Revise.jl.</p><p>One usually wants to load these packages every time a Julia session is started. This can be done automatically by creating a <a href="https://docs.julialang.org/en/v1/manual/command-line-interface/#Startup-file">startup file</a> in <code>~/.julia/config/startup.jl</code> with the following content:</p><pre><code class="language-julia hljs">try
    using Revise
    using OhMyREPL
catch e
    @warn &quot;Error importing Revise or OhMyREPL. Use `]add Revise OhMyREPL` to install them.&quot;
end</code></pre><h3 id="Local-environments"><a class="docs-heading-anchor" href="#Local-environments">Local environments</a><a id="Local-environments-1"></a><a class="docs-heading-anchor-permalink" href="#Local-environments" title="Permalink"></a></h3><p>Above, both packages have been installed in the default environment (<code>@v1.X</code>), which is convenient because we want to load these packages no matter which Julia project we&#39;re currently working on.</p><p>For more specific things (such as doing simulations using VortexPasta.jl), it is <a href="https://modernjuliaworkflows.github.io/writing/#environments">recommended</a> to install things in a <em>local</em> environment, which allows (among other things) to avoid conflicts between package versions when working on different Julia projects.</p><p>To create a new local environment in the current folder, launch Julia using:<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p><pre><code class="language-bash hljs">julia --project=.</code></pre><p>Packages will then be installed in this environment. For example, enter package mode using <code>]</code> and install the <a href="https://docs.makie.org/stable/">GLMakie.jl</a> package:</p><pre><code class="language-julia hljs">(simulation) pkg&gt; add GLMakie</code></pre><p>This will install the GLMakie package (for plotting) and all its dependencies. It will also precompile installed packages, which can take a few minutes (especially for GLMakie, which is a large package with many dependencies), but which makes loading the package faster when it is actually imported from a Julia session or script.</p><p>One can check that the project now contains a single package:</p><pre><code class="language-julia hljs">(simulation) pkg&gt; status
Status `/path/to/simulation/Project.toml`
  [e9467ef8] GLMakie v0.8.9</code></pre><p>Moreover, the current directory now contains two new files, <code>Project.toml</code> and <code>Manifest.toml</code>, which describe the packages installed by local environment. The <code>Project.toml</code> file lists the packages that we have directly installed (so just GLMakie for now). The <code>Manifest.toml</code> file is much larger, as it also contains the list of <em>all</em> installed packages associated to the environment, including the direct and indirect dependencies of GLMakie, and the precise versions of the installed packages. This file is automatically generated and is very useful for reproducibility.</p><p>Once the new project has been created, one can simply start Julia using</p><pre><code class="language-bash hljs">julia --project</code></pre><p>from the same directory (<code>simulation</code> in this example). (Note that, this time, we haven&#39;t told Julia <em>where</em> the project is located.) Julia will automatically detect the presence of the <code>Project.toml</code> file in the current directory and enable the local environment.</p><h3 id="Installing-VortexPasta.jl"><a class="docs-heading-anchor" href="#Installing-VortexPasta.jl">Installing VortexPasta.jl</a><a id="Installing-VortexPasta.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-VortexPasta.jl" title="Permalink"></a></h3><p>It is recommended to install VortexPasta.jl in a local environment, for example in the same environment as in the previous example (which already includes GLMakie).</p><p>To install it, one should first add the <a href="https://github.com/jipolanco/VortexRegistry.jl">VortexRegistry</a> package registry, which contains information on how to install VortexPasta.jl:</p><pre><code class="language-julia-repl hljs">(simulation) pkg&gt; registry add https://github.com/jipolanco/VortexRegistry.jl.git</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If this command asks for an SSH key location and then fails with a <code>GitError</code>, <a href="https://github.com/GunnarFarneback/LocalRegistry.jl/blob/master/docs/ssh_keys.md#2-using-an-external-git-binary-with-julias-package-manager">you may need to set</a> the <a href="https://docs.julialang.org/en/v1/manual/environment-variables/#JULIA_PKG_USE_CLI_GIT"><code>JULIA_PKG_USE_CLI_GIT</code></a> environment variable to <code>true</code>. For instance, add the line</p><pre><code class="language-julia hljs">ENV[&quot;JULIA_PKG_USE_CLI_GIT&quot;] = &quot;true&quot;</code></pre><p>to your <code>~/.julia/config/startup.jl</code> file<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup> and then restart Julia.</p></div></div><p>Now we can easily install VortexPasta.jl:</p><pre><code class="language-julia-repl hljs">(simulation) pkg&gt; add VortexPasta</code></pre><p>As before, this will install all dependencies and precompile VortexPasta.jl and other installed packages. Now the status of the local environment should look something like:</p><pre><code class="language-julia-repl hljs">(simulation) pkg&gt; status
Status `~/Work/Projects/Vortices/Codes/VortexPasta/docs/simulation/Project.toml`
  [e9467ef8] GLMakie v0.8.9
  [3d0f1e53] VortexPasta v0.2.1</code></pre><h3 id="Installing-VortexPasta.jl-in-development-mode"><a class="docs-heading-anchor" href="#Installing-VortexPasta.jl-in-development-mode">Installing VortexPasta.jl in development mode</a><a id="Installing-VortexPasta.jl-in-development-mode-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-VortexPasta.jl-in-development-mode" title="Permalink"></a></h3><p>The above procedure installs VortexPasta.jl in a read-only directory somewhere in <code>~/.julia</code>. If, instead, we would like to make modifications to VortexPasta.jl, we should install it in &quot;development&quot; mode using <code>dev</code> (or <code>develop</code>) instead of <code>add</code>:</p><pre><code class="language-julia-repl hljs">(simulation) pkg&gt; dev VortexPasta</code></pre><p>This will install the development version of VortexPasta.jl to <code>~/.julia/dev/VortexPasta</code>. Any modifications to the code there will be visible when running scripts or code in the local environment.</p><h2 id="Running-the-code"><a class="docs-heading-anchor" href="#Running-the-code">Running the code</a><a id="Running-the-code-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-code" title="Permalink"></a></h2><p>See the <a href="tutorials/01-vortex_ring/#tutorial-vortex-ring">vortex ring tutorial</a> for an example on how to prepare and run vortex filament simulations, from initialising a vortex filament with the wanted geometry, to computing its self-induced velocity, running simulations and saving the results for further analysis.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Alternatively, one can start Julia <em>without</em> the <code>--project</code> flag, and then <code>] activate .</code> in package mode, as described in the <a href="https://pkgdocs.julialang.org/dev/getting-started/#Getting-Started-with-Environments">official docs</a>.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Replace <code>~/.julia</code> with <a href="https://docs.julialang.org/en/v1/manual/environment-variables/#JULIA_DEPOT_PATH"><code>$JULIA_DEPOT_PATH</code></a> in case you have defined this environment variable.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="tutorials/01-vortex_ring/">Vortex ring »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 29 October 2024 09:37">Tuesday 29 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
