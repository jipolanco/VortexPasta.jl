<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CellLists · VortexPasta</title><meta name="title" content="CellLists · VortexPasta"/><meta property="og:title" content="CellLists · VortexPasta"/><meta property="twitter:title" content="CellLists · VortexPasta"/><meta name="description" content="Documentation for VortexPasta."/><meta property="og:description" content="Documentation for VortexPasta."/><meta property="twitter:description" content="Documentation for VortexPasta."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/fonts.css" rel="stylesheet" type="text/css"/><script src="../../assets/sa.js" data-collect-dnt="true" async></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">VortexPasta</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">VortexPasta.jl</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/01-vortex_ring/">Vortex ring</a></li><li><a class="tocitem" href="../../tutorials/02-kelvin_waves/">Kelvin waves</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/VFM/">The vortex filament model</a></li><li><a class="tocitem" href="../../methods/Ewald/">Ewald summation for Biot–Savart</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Tips and tricks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tips/parallelisation/">Parallelisation and clusters</a></li><li><a class="tocitem" href="../../tips/gpu/">GPU usage</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">Modules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PaddedArrays/">PaddedArrays</a></li><li><a class="tocitem" href="../PredefinedCurves/">PredefinedCurves</a></li><li class="is-active"><a class="tocitem" href>CellLists</a><ul class="internal"><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li><li><a class="tocitem" href="../Quadratures/">Quadratures</a></li><li><a class="tocitem" href="../Filaments/">Filaments</a></li><li><a class="tocitem" href="../FilamentIO/">FilamentIO</a></li><li><a class="tocitem" href="../FindNearbySegments/">FindNearbySegments</a></li><li><a class="tocitem" href="../Constants/">Constants</a></li><li><a class="tocitem" href="../BiotSavart/">BiotSavart</a></li><li><a class="tocitem" href="../SyntheticFields/">SyntheticFields</a></li><li><a class="tocitem" href="../Forcing/">Forcing</a></li><li><a class="tocitem" href="../Containers/">Containers</a></li><li><a class="tocitem" href="../Reconnections/">Reconnections</a></li><li><a class="tocitem" href="../Timestepping/">Timestepping</a></li><li><a class="tocitem" href="../Diagnostics/">Diagnostics</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Modules</a></li><li class="is-active"><a href>CellLists</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CellLists</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jipolanco/VortexPasta.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jipolanco/VortexPasta.jl/blob/master/docs/src/modules/CellLists.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="CellLists"><a class="docs-heading-anchor" href="#CellLists">CellLists</a><a id="CellLists-1"></a><a class="docs-heading-anchor-permalink" href="#CellLists" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="VortexPasta.CellLists" href="#VortexPasta.CellLists"><code>VortexPasta.CellLists</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CellLists</code></pre><p>Module implementing the cell lists algorithm over <span>$N$</span>-dimensional periodic domains.</p><p>See the <a href="https://en.wikipedia.org/wiki/Cell_lists">Wikipedia article</a> for some details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L1-L7">source</a></section></article><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="VortexPasta.CellLists.PeriodicCellList" href="#VortexPasta.CellLists.PeriodicCellList"><code>VortexPasta.CellLists.PeriodicCellList</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PeriodicCellList{N, T}
PeriodicCellList(
    ::Type{T}, rs_cut::NTuple{N, Real}, periods::NTuple{N, Real},
    [nsubdiv = static(1)];
    [to_coordinate::Function = identity],
)</code></pre><p>Construct a cell list for dealing with pair interactions.</p><p>Above, <code>N</code> is the number of spatial dimensions, and <code>T</code> is the type of each element. In the simplest cases, <code>T</code> can simply describe a coordinate in <span>$N$</span>-dimensional space (e.g. <code>T = SVector{N, Float64}</code>). One can also deal with more complicated elements which include more information. As an example, see further below for how to deal with filament segments in 3D space.</p><p>The cutoff radii <code>rs_cut</code> (which can be different in each direction) don&#39;t need to exactly divide the domain period <code>L</code> into equal pieces, but it&#39;s recommended that it does so for performance reasons.</p><p>Optionally, one can choose to subdivide each cell (of size <code>≈ rcut</code>) onto <code>nsubdiv</code> subcells. This can significantly improve performance, since it allows to discard some spurious pair interactions (i.e. beyond the chosen cutoff radius) as described <a href="https://en.wikipedia.org/wiki/Cell_lists#Improvements">here</a>. In practice, a value of <code>2</code> or <code>3</code> can significantly improve performance compared to no subdivision (<code>1</code>). For convenience, it can be passed as <code>nsubdiv = Val(M)</code> or as <code>nsubdiv = static(M)</code>.</p><p>Infinite non-periodic domains (in the sense of <code>period = Infinity()</code>) are not supported.</p><p><strong>Dealing with filament segments</strong></p><p>One of the possible uses of <code>PeriodicCellList</code> is to classify filament segments (which are typically shorter than the cutoff radius) according to their spatial location. In that case, <code>T</code> is not a simple coordinate, but may contain more information including things like (1) the filament the segment belongs to, and (2) the location of the segment within the filament. As there is no unique way of associating a coordinate to a segment, one should pass the <code>to_coordinate</code> argument which &quot;converts&quot; the segment to a coordinate in space. For instance, the passed <code>to_coordinate</code> function may return the midpoint of the segment, which will be used to determine the cell associated to the segment.</p><p>The applied cutoff radius <span>$r_{\text{cut}}$</span> should be much larger than the maximum segment length <span>$ℓ$</span>, or should at least account for <span>$ℓ$</span>. Basically, if one wants an actual cut-off radius <span>$r₀$</span>, then the applied cutoff radius passed to the constructor should be <span>$r_{\text{cut}} = r₀ + ℓ$</span>. Otherwise, a small amount of interactions within <span>$[r₀ - ℓ, r₀]$</span> may be missed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L51-L96">source</a></section></article><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="VortexPasta.CellLists.add_element!" href="#VortexPasta.CellLists.add_element!"><code>VortexPasta.CellLists.add_element!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_element!(cl::PeriodicCellList{N, T}, el::T, [x⃗])</code></pre><p>Add element to the cell list.</p><p>Determines the cell associated to the element and then appends the element to that cell.</p><p>Optionally, one may pass the coordinate location <span>$x⃗$</span> associated to the element. Otherwise, it will be obtained from the element according to</p><pre><code class="nohighlight hljs">x⃗ = to_coordinate(el)</code></pre><p>where <code>to_coordinate</code> corresponds to the keyword argument of <a href="#VortexPasta.CellLists.PeriodicCellList"><code>PeriodicCellList</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L214-L227">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="VortexPasta.CellLists.finalise_cells!" href="#VortexPasta.CellLists.finalise_cells!"><code>VortexPasta.CellLists.finalise_cells!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CellLists.finalise_cells!(cl::PeriodicCellList)</code></pre><p>&quot;Finalise&quot; cells before iterating over its elements.</p><p>This function performs operations needed to iterate over elements of the cell lists, such as filling ghost cells. It must be called once after all elements have been added to the cell list using <a href="#VortexPasta.CellLists.add_element!"><code>add_element!</code></a> and before one starts iterating using <a href="#VortexPasta.CellLists.nearby_elements"><code>nearby_elements</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L246-L255">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.empty!" href="#Base.empty!"><code>Base.empty!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Base.empty!(tsf::TimeSeriesFile)</code></pre><p>Reset <a href="../FilamentIO/#VortexPasta.FilamentIO.TimeSeriesFile"><code>TimeSeriesFile</code></a>, removing all entries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/FilamentIO/VTKHDF/json_vtk_series.jl#L48-L52">source</a></section><section><div><pre><code class="language-julia hljs">Base.empty!(cl::PeriodicCellList) -&gt; cl</code></pre><p>Remove all elements from the cell list.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L185-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="VortexPasta.CellLists.nearby_elements" href="#VortexPasta.CellLists.nearby_elements"><code>VortexPasta.CellLists.nearby_elements</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nearby_elements(cl::PeriodicCellList{N}, x⃗)</code></pre><p>Return an iterator over the elements that are sufficiently close to the point <code>x⃗</code>.</p><p>The iterator returns the elements which are likely to be within the cutoff radius of the point <code>x⃗</code>. More precisely, it returns elements in the same cell as <code>x⃗</code> as well as in neighbouring cells.</p><p>Here <code>x⃗</code> should be a coordinate, usually represented by an <code>SVector{N}</code> or an <code>NTuple{N}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/VortexPasta.jl/blob/fe51b0cca7f3cd36b373c8e0ae6798a4a88e38da/src/CellLists/CellLists.jl#L305-L315">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../PredefinedCurves/">« PredefinedCurves</a><a class="docs-footer-nextpage" href="../Quadratures/">Quadratures »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Saturday 5 July 2025 15:04">Saturday 5 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
