import{_ as d,C as p,o as r,c as o,j as e,a as i,E as a,aA as n,w as l}from"./chunks/framework.bUxuWUtX.js";const j=JSON.parse('{"title":"FindNearbySegments","description":"","frontmatter":{},"headers":[],"relativePath":"modules/FindNearbySegments.md","filePath":"modules/FindNearbySegments.md","lastUpdated":null}'),h={name:"modules/FindNearbySegments.md"},k={class:"jldocstring custom-block",open:""},g={class:"jldocstring custom-block",open:""},m={class:"jldocstring custom-block",open:""},b={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""},y={class:"MathJax",jax:"SVG",overflow:"linebreak"},u={style:{"vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"3.43ex",height:"1.357ex",role:"img",focusable:"false",viewBox:"0 -442 1516.2 599.8"},C={class:"jldocstring custom-block",open:""};function E(F,s,f,_,S,x){const t=p("Badge");return r(),o("div",null,[s[34]||(s[34]=e("h1",{id:"FindNearbySegments",tabindex:"-1"},[i("FindNearbySegments "),e("a",{class:"header-anchor",href:"#FindNearbySegments","aria-label":'Permalink to "FindNearbySegments {#FindNearbySegments}"'},"​")],-1)),e("details",k,[e("summary",null,[s[0]||(s[0]=e("a",{id:"VortexPasta.FindNearbySegments",href:"#VortexPasta.FindNearbySegments"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments")],-1)),s[1]||(s[1]=i()),a(t,{type:"info",class:"jlObjectType jlModule",text:"Module"})]),s[3]||(s[3]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FindNearbySegments</span></span></code></pre></div><p>A module for finding pairs of nearby filament segments.</p><p>This is a common operation, used for instance for:</p><ul><li><p>computing short-range Biot-Savart interactions between filament segments;</p></li><li><p>detecting vortex reconnection candidates.</p></li></ul>',4)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[2]||(s[2]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/FindNearbySegments.jl#L1-L10",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s[35]||(s[35]=e("h2",{id:"Backends",tabindex:"-1"},[i("Backends "),e("a",{class:"header-anchor",href:"#Backends","aria-label":'Permalink to "Backends {#Backends}"'},"​")],-1)),e("details",g,[e("summary",null,[s[4]||(s[4]=e("a",{id:"VortexPasta.FindNearbySegments.NaiveSegmentFinder",href:"#VortexPasta.FindNearbySegments.NaiveSegmentFinder"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments.NaiveSegmentFinder")],-1)),s[5]||(s[5]=i()),a(t,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[7]||(s[7]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NaiveSegmentFinder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NearbySegmentFinder</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NaiveSegmentFinder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{&lt;:AbstractFilament}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Initialise nearby segment finder based on a naive searching method.</p><p>When using this segment finder, <a href="/VortexPasta.jl/v0.32/modules/FindNearbySegments#VortexPasta.FindNearbySegments.nearby_segments"><code>nearby_segments</code></a> iterates through <em>all</em> segments in all filaments <code>fs</code>, performing no filtering at all. One should manually use <a href="/VortexPasta.jl/v0.32/modules/FindNearbySegments#VortexPasta.FindNearbySegments.segment_is_close"><code>segment_is_close</code></a> to filter the returned segments while iterating.</p>`,3)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[6]||(s[6]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/naive.jl#L3-L13",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),e("details",m,[e("summary",null,[s[8]||(s[8]=e("a",{id:"VortexPasta.FindNearbySegments.CellListSegmentFinder",href:"#VortexPasta.FindNearbySegments.CellListSegmentFinder"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments.CellListSegmentFinder")],-1)),s[9]||(s[9]=i()),a(t,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[11]||(s[11]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CellListSegmentFinder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NearbySegmentFinder</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CellListSegmentFinder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{&lt;:AbstractFilament}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    r_cut</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Ls</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NTuple{3, Real}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nsubdiv </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Initialise nearby segment finder based on cell lists algorithm.</p><p>Only supports fully periodic domains.</p><p>See the <a href="/VortexPasta.jl/v0.32/modules/CellLists#CellLists"><code>CellLists</code></a> module for more details.</p><p><strong>Mandatory arguments</strong></p><ul><li><p><code>fs</code>: vector of filaments;</p></li><li><p><code>r_cut::Real</code>: cut-off distance;</p></li><li><p><code>Ls::NTuple{3, Real}</code>: domain period in each direction. Note that this backend doesn&#39;t support non-periodic (<code>Infinity</code>) directions.</p></li></ul><p><strong>Optional keyword arguments</strong></p><ul><li><code>nsubdiv = Val(M)</code>: number of cell lists subdivisions. Here <code>M</code> must be a positive integer (<code>M = 1</code> means no subdivisions). See <a href="/VortexPasta.jl/v0.32/modules/CellLists#VortexPasta.CellLists.PeriodicCellList"><code>PeriodicCellList</code></a> for details.</li></ul>`,8)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[10]||(s[10]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/cell_lists.jl#L5-L33",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s[36]||(s[36]=e("h2",{id:"Functions",tabindex:"-1"},[i("Functions "),e("a",{class:"header-anchor",href:"#Functions","aria-label":'Permalink to "Functions {#Functions}"'},"​")],-1)),e("details",b,[e("summary",null,[s[12]||(s[12]=e("a",{id:"VortexPasta.FindNearbySegments.set_filaments!",href:"#VortexPasta.FindNearbySegments.set_filaments!"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments.set_filaments!")],-1)),s[13]||(s[13]=i()),a(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[15]||(s[15]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_filaments!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NearbySegmentFinder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{&lt;:AbstractFilament}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Store (and optionally process) the list of filaments.</p><p>This must be called to set the filament list before using <a href="/VortexPasta.jl/v0.32/modules/FindNearbySegments#VortexPasta.FindNearbySegments.nearby_segments"><code>nearby_segments</code></a>.</p>',3)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[14]||(s[14]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/FindNearbySegments.jl#L32-L38",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),e("details",c,[e("summary",null,[s[16]||(s[16]=e("a",{id:"VortexPasta.FindNearbySegments.nearby_segments",href:"#VortexPasta.FindNearbySegments.nearby_segments"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments.nearby_segments")],-1)),s[17]||(s[17]=i()),a(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[28]||(s[28]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nearby_segments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NearbySegmentFinder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x⃗</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Return an iterator over the segments that are &quot;close&quot; to the location <code>x⃗</code>.</p>',2)),e("p",null,[s[19]||(s[19]=i("A segment is considered to be close to ",-1)),s[20]||(s[20]=e("code",null,"x⃗",-1)),s[21]||(s[21]=i(" if the minimum",-1)),s[22]||(s[22]=e("sup",{class:"footnote-ref"},[e("a",{href:"#fn1",id:"fnref1"},"[1]")],-1)),s[23]||(s[23]=i(" distance between ",-1)),s[24]||(s[24]=e("code",null,"x⃗",-1)),s[25]||(s[25]=i(" and the segment midpoint is smaller than the cutoff distance ",-1)),e("mjx-container",y,[(r(),o("svg",u,[...s[18]||(s[18]=[n('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math" data-latex="r_{\\text{cut}}"><g data-mml-node="msub" data-latex="r_{\\text{cut}}"><g data-mml-node="mi" data-latex="r"><path data-c="1D45F" d="M436 374C436 416 395 442 351 442C302 442 261 419 227 372C217 411 183 442 136 442C95 442 65 410 44 345C34 312 29 293 29 287C29 278 34 273 45 273C50 273 53 274 56 276C61 285 64 292 65 299C83 375 106 413 133 413C150 413 159 399 159 371C159 358 154 331 144 290L87 63C84 50 78 24 78 19C78-1 89-11 110-11C130-11 143-1 150 19L169 91C180 134 187 162 190 175L221 303C223 311 231 324 244 343C271 381 302 413 351 413C363 413 373 411 382 406C352 397 337 378 337 351C337 325 351 312 378 312C411 312 436 341 436 374Z"></path></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-latex="{\\text{cut}}" data-mjx-texclass="ORD"><g data-mml-node="mtext" data-latex="\\text{cut}"><path data-c="63" d="M251 416C293 416 325 406 347 386C323 383 306 361 306 338C306 305 322 289 355 289C388 289 404 306 404 339C404 410 327 448 250 448C188 448 137 426 96 380C55 334 34 279 34 216C34 155 55 101 96 56C137 11 187-11 248-11C298-11 337 3 365 32C388 55 403 78 411 102C414 111 415 117 415 121C415 130 409 134 398 134C390 134 385 130 382 122C361 55 320 21 257 21C228 21 200 34 172 61C139 92 123 144 123 218C123 318 161 416 251 416Z"></path><path data-c="75" d="M267 18C198 18 185 47 185 112L185 442L32 431L32 393C71 393 94 389 100 382C106 375 109 350 109 306L109 159C109 120 112 90 119 67C134 15 189-11 262-11C316-11 357 14 385 65L385-11L535 0L535 38C499 38 478 40 470 46C462 52 458 66 458 89L458 442L306 431L306 393C341 393 362 390 370 384C378 378 382 365 382 342L382 167C382 88 340 18 267 18Z" transform="translate(444,0)"></path><path data-c="74" d="M332 126L332 186L300 186L300 128C300 78 282 22 238 22C197 22 177 56 177 124L177 395L316 395L316 433L177 433L177 615L145 615C144 582 141 553 134 527C117 461 78 427 19 424L19 395L102 395L102 126C102 67 120 29 155 10C182-4 207-11 232-11C298-11 332 55 332 126Z" transform="translate(1000,0)"></path></g></g></g></g></g>',1)])]))]),s[26]||(s[26]=i(".",-1))]),s[29]||(s[29]=n('<p>Typical usage:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x⃗ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Vec3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> segment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">∈</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nearby_segments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, x⃗)</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Get the filament `f` and the index `i` of the segment within the filament.</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # The segment is between the filament nodes `f[i]` and `f[i + 1]`.</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (; f, i,) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> segment</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Do something with the segment...</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div>',2)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[27]||(s[27]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/FindNearbySegments.jl#L41-L63",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),e("details",C,[e("summary",null,[s[30]||(s[30]=e("a",{id:"VortexPasta.FindNearbySegments.segment_is_close",href:"#VortexPasta.FindNearbySegments.segment_is_close"},[e("span",{class:"jlbinding"},"VortexPasta.FindNearbySegments.segment_is_close")],-1)),s[31]||(s[31]=i()),a(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[33]||(s[33]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">segment_is_close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Segment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x⃗, r_cut</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r²_cut</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Ls, Lhs) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bool</span></span></code></pre></div><p>Determine whether segment <code>s</code> is close to the point <code>x⃗</code>.</p><p>Here <code>r_cut</code> is the critical distance below which <code>s</code> and <code>x⃗</code> will be considered to be &quot;close&quot;, and <code>r²_cut = r_cut^2</code> is its squared value.</p><p>Moreover, <code>Ls = (Lx, Ly, Lz)</code> contains the domain period along each dimension (components can be <code>Infinity()</code> for infinite non-periodic domains), and <code>Lhs = (Lx/2, Ly/2, Lz/2)</code> contains half the domain periods.</p>',4)),a(t,{type:"info",class:"source-link",text:"source"},{default:l(()=>[...s[32]||(s[32]=[e("a",{href:"https://github.com/jipolanco/VortexPasta.jl/blob/dbbd29218d5d247bbb53e6266b9f5b36a4f04d11/src/FindNearbySegments/FindNearbySegments.jl#L66-L77",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s[37]||(s[37]=n('<hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>When periodicity is enabled, the relevant distance is the <em>minimum</em> distance between the two points, after considering all their periodic images. <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>',2))])}const N=d(h,[["render",E]]);export{j as __pageData,N as default};
